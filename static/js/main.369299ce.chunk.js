(this.webpackJsonpjuan_carlos_web=this.webpackJsonpjuan_carlos_web||[]).push([[0],{79:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(11),o=n.n(i),s=n(22),c=n(17),u=n(29),l=n(27),h=n(41),d=n(129),j=n(15),m=n(19),b=n(46),f=n(123),p=n(117),O=n(121),v=n(122),g=n(7),y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).props=t,a.imdbId=t.imdbId,a.state={torrentInfoHash:"",torrentMagnetURI:"",torrentName:"",torrentProgress:"",torrentFiles:[],mp4file:{},streams:[]},a.watch=a.watch.bind(Object(m.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.listStreams()}},{key:"buildQuery",value:function(){var t={params:[null,{query:{imdb_id:this.imdbId,type:"movie",video_id:this.imdbId}}],method:"stream.find",id:1,jsonrpc:"2.0"};return btoa(JSON.stringify(t))}},{key:"listStreams",value:function(){this.getJuanCarlos(),this.getThePirateBay()}},{key:"getThePirateBay",value:function(){var t=this;fetch("".concat("https://thepiratebay-plus.strem.fun/stream/movie/").concat(this.imdbId,".json"),{method:"GET"}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){var n,a=e.streams,r=Object(b.a)(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.filename=i.title,delete i.title}}catch(o){r.e(o)}finally{r.f()}t.appendToList(a)})).catch((function(t){console.error("Error:",t)}))}},{key:"getJuanCarlos",value:function(){var t=this;fetch("".concat("https://juan.best4stremio.space/stremioget/stremio/v1/q.json?b=").concat(this.buildQuery()),{method:"GET"}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){null!=e.result&&t.appendToList(e.result)})).catch((function(t){console.error("Error:",t)}))}},{key:"appendToList",value:function(t){function e(t){return Object(g.jsx)(p.a,Object(j.a)({button:!0,component:"a"},t))}var n,r=[],i=Object(b.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.filename;void 0===s&&(s=document.getElementById("imdb_search").value);var c="".concat(window.location.href).concat(o.infoHash);r.push(Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(e,{button:!0,href:c,children:Object(g.jsx)(O.a,{primary:s,infohash:o.infoHash})}),Object(g.jsx)(v.a,{})]},o.infoHash))}}catch(u){i.e(u)}finally{i.f()}this.setState(Object(j.a)(Object(j.a)({},this.state),{},{streams:this.state.streams.concat(r)}))}},{key:"watch",value:function(t){window.location.href=t}},{key:"render",value:function(){return Object(g.jsx)(a.Fragment,{children:Object(g.jsx)(f.a,{component:"nav","aria-label":"mailbox folders",children:this.state.streams})})}}]),n}(a.Component),x=n(130),k=n(131),w=n(126),T=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).props=t,a.state={open:!1,options:[],streamList:[]},a.searchTitle=a.searchTitle.bind(Object(m.a)(a)),a.listStreams=a.listStreams.bind(Object(m.a)(a)),a.data=[],a.url=window.location.origin+window.location.pathname,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"fetchList",value:function(){var t=this;fetch("".concat(this.url,"/movies.json"),{method:"GET"}).then((function(t){return t.json()})).then((function(e){t.data=e})).catch((function(t){console.error("Error:",t)}))}},{key:"searchJson",value:function(t){for(var e=[],n=0;n<this.data.length;n++)this.data[n].originalTitle.toLowerCase().includes(t.toLowerCase())&&e.push(this.data[n]);return e}},{key:"searchTitle",value:function(t){var e=this,n=t.target.value;n.length<3||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.setState(Object(j.a)(Object(j.a)({},e.state),{},{options:e.searchJson(n)}))}),300))}},{key:"listStreams",value:function(){var t=this.searchJson(document.getElementById("imdb_search").value)[0].tconst;this.setState(Object(j.a)(Object(j.a)({},this.state),{},{streamList:Object(g.jsx)(y,{imdbId:t},t)}))}},{key:"render",value:function(){var t=this;return Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(k.a,{id:"imdb_search",style:{width:"100%"},open:this.state.open,onOpen:function(){t.setState(Object(j.a)(Object(j.a)({},t.state),{},{open:!0}))},onClose:function(){t.setState(Object(j.a)(Object(j.a)({},t.state),{},{open:!1}))},getOptionSelected:function(t,e){return t.originalTitle===e.originalTitle},getOptionLabel:function(t){return t.originalTitle},options:this.state.options,renderTags:this.listStreams,renderInput:function(e){return Object(g.jsx)(x.a,Object(j.a)(Object(j.a)({},e),{},{label:"Type the movie name",variant:"outlined",onChange:function(e){t.searchTitle(e)},InputProps:Object(j.a)({},e.InputProps)}))}}),Object(g.jsx)(w.a,{variant:"contained",onClick:this.listStreams,children:"Search Available streams"}),this.state.streamList]})}}]),n}(a.Component),S=n(13),I=n(127),L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).infoHash=t.match.params.id,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.startStream()}},{key:"startStream",value:function(){(new window.WebTorrent).add(this.generateMagnetLink(this.infoHash),(function(t){t.files.find((function(t){return t.name.endsWith(".mp4")})).getBlobURL((function(t,e){if(t)throw t;document.getElementById("progress").remove(),document.getElementById("player").src=e}))}))}},{key:"generateMagnetLink",value:function(t){return"magnet:?xt=urn:btih:".concat(t,"&tr=udp://tracker.openbittorrent.com:6969&tr=udp://tracker.coppersurfer.tk:6969&udp://www.torrent.eu.org:451&tr=udp://open.stealth.si:80&tr=udp://tracker.opentrackr.org:1337&tr=wss://tracker.openwebtorrent.com")}},{key:"render",value:function(){return Object(g.jsxs)(r.a.Fragment,{children:[Object(g.jsx)(I.a,{id:"progress"}),Object(g.jsx)("br",{}),Object(g.jsx)("video",{controls:!0,id:"player",width:"100%"})]})}}]),n}(a.Component),C=Object(S.f)(L),E=n(4),B=n(128),F=n(45),_=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props.classes;return Object(g.jsx)(r.a.Fragment,{children:Object(g.jsxs)("div",{className:t.root,children:[Object(g.jsx)(B.a,{}),Object(g.jsxs)(d.a,{component:"main",className:t.main,maxWidth:"sm",children:[Object(g.jsx)(h.a,{variant:"h2",component:"h1",gutterBottom:!0,children:"WebStremio"}),Object(g.jsx)(F.a,{children:Object(g.jsxs)(S.c,{children:[Object(g.jsx)(S.a,{exact:!0,path:"/",children:Object(g.jsx)(T,{})}),Object(g.jsx)(S.a,{path:"/:id",children:Object(g.jsx)(C,{})})]})})]}),Object(g.jsx)("footer",{className:t.footer,children:Object(g.jsx)(d.a,{maxWidth:"sm",children:Object(g.jsx)(h.a,{variant:"body1",children:"We love Stremio"})})})]})})}}]),n}(a.Component),J=Object(E.a)((function(t){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:t.spacing(8),marginBottom:t.spacing(2)},footer:{padding:t.spacing(3,2),marginTop:"auto",backgroundColor:"light"===t.palette.type?t.palette.grey[200]:t.palette.grey[800]}}}))(_),H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),i(t),o(t)}))};o.a.render(Object(g.jsx)(J,{}),document.getElementById("root")),H()}},[[79,1,2]]]);
//# sourceMappingURL=main.369299ce.chunk.js.map