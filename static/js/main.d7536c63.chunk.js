(this.webpackJsonpjuan_carlos_web=this.webpackJsonpjuan_carlos_web||[]).push([[0],{79:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(11),i=n.n(r),s=n(22),c=n(17),l=n(29),u=n(27),d=n(41),h=n(127),j=n(15),b=n(19),m=n(52),p=n(122),f=n(116),O=n(120),v=n(121),g=n(7),y=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).props=t,a.imdbId=t.imdbId,a.state={torrentInfoHash:"",torrentMagnetURI:"",torrentName:"",torrentProgress:"",torrentFiles:[],mp4file:{},streams:[]},a.watch=a.watch.bind(Object(b.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.listStreams()}},{key:"buildQuery",value:function(){var t={params:[null,{query:{imdb_id:this.imdbId,type:"movie",video_id:this.imdbId}}],method:"stream.find",id:1,jsonrpc:"2.0"};return btoa(JSON.stringify(t))}},{key:"listStreams",value:function(){var t=this;fetch("".concat("https://juan.best4stremio.space/stremioget/stremio/v1/q.json?b=").concat(this.buildQuery()),{method:"GET"}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){t.generateList(e.result)})).catch((function(t){console.error("Error:",t)}))}},{key:"generateList",value:function(t){function e(t){return Object(g.jsx)(f.a,Object(j.a)({button:!0,component:"a"},t))}var n,o=[],r=Object(m.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,s=i.filename;void 0===s&&(s=document.getElementById("imdb_search").value);var c="".concat(window.location.href,"/watch/").concat(i.infoHash);o.push(Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(e,{button:!0,href:c,children:Object(g.jsx)(O.a,{primary:s,infohash:i.infoHash})}),Object(g.jsx)(v.a,{})]},i.infoHash))}}catch(l){r.e(l)}finally{r.f()}this.setState(Object(j.a)(Object(j.a)({},this.state),{},{streams:o}))}},{key:"watch",value:function(t){window.location.href=t}},{key:"render",value:function(){return Object(g.jsx)(a.Fragment,{children:Object(g.jsx)(p.a,{component:"nav","aria-label":"mailbox folders",children:this.state.streams})})}}]),n}(a.Component),x=n(128),w=n(129),k=n(125),S=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).props=t,a.state={open:!1,options:[],streamList:[]},a.searchTitle=a.searchTitle.bind(Object(b.a)(a)),a.listStreams=a.listStreams.bind(Object(b.a)(a)),a.data=[],a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"fetchList",value:function(){var t=this;fetch("".concat(window.location.href,"/movies.json"),{method:"GET"}).then((function(t){return t.json()})).then((function(e){t.data=e})).catch((function(t){console.error("Error:",t)}))}},{key:"searchJson",value:function(t){for(var e=[],n=0;n<this.data.length;n++)this.data[n].originalTitle.toLowerCase().includes(t.toLowerCase())&&e.push(this.data[n]);return e}},{key:"searchTitle",value:function(t){var e=this,n=t.target.value;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.setState(Object(j.a)(Object(j.a)({},e.state),{},{options:e.searchJson(n)}))}),300)}},{key:"listStreams",value:function(){var t=this.searchJson(document.getElementById("imdb_search").value)[0].tconst;this.setState(Object(j.a)(Object(j.a)({},this.state),{},{streamList:Object(g.jsx)(y,{imdbId:t},t)}))}},{key:"render",value:function(){var t=this;return Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(w.a,{id:"imdb_search",style:{width:500},open:this.state.open,onOpen:function(){t.setState(Object(j.a)(Object(j.a)({},t.state),{},{open:!0}))},onClose:function(){t.setState(Object(j.a)(Object(j.a)({},t.state),{},{open:!1}))},getOptionSelected:function(t,e){return t.originalTitle===e.originalTitle},getOptionLabel:function(t){return t.originalTitle},options:this.state.options,renderTags:this.listStreams,renderInput:function(e){return Object(g.jsx)(x.a,Object(j.a)(Object(j.a)({},e),{},{label:"Type the movie name",variant:"outlined",onChange:function(e){t.searchTitle(e)},InputProps:Object(j.a)({},e.InputProps)}))}}),Object(g.jsx)(k.a,{variant:"contained",onClick:this.listStreams,children:"Search Available streams"}),this.state.streamList]})}}]),n}(a.Component),T=n(13),C=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;Object(s.a)(this,n),a=e.call(this,t);try{a.infoHash=window.location.pathname.split("/")[3]}catch(o){a.props.history.push("/")}return a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/webtorrent@latest/webtorrent.min.js",e.async=!0,e.onload=function(){return t.scriptLoaded()},document.body.appendChild(e)}},{key:"scriptLoaded",value:function(){this.startStream()}},{key:"startStream",value:function(){var t=new window.WebTorrent;t.on("error",(function(t){console.error("ERROR: "+t.message)})),t.on("torrent",(function(t){console.log(t)})),t.add(this.infoHash,(function(t){t.files.find((function(t){return t.name.endsWith(".mp4")})).appendTo("body"),t.on("download",(function(e){console.log("just downloaded: "+e),console.log("total downloaded: "+t.downloaded),console.log("download speed: "+t.downloadSpeed),console.log("progress: "+t.progress)}))}))}},{key:"render",value:function(){return Object(g.jsx)(o.a.Fragment,{children:Object(g.jsx)("div",{id:"player"})})}}]),n}(a.Component),I=Object(T.f)(C),L=n(4),_=n(126),E=n(45),F=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props.classes;return Object(g.jsx)(o.a.Fragment,{children:Object(g.jsxs)("div",{className:t.root,children:[Object(g.jsx)(_.a,{}),Object(g.jsxs)(h.a,{component:"main",className:t.main,maxWidth:"sm",children:[Object(g.jsx)(d.a,{variant:"h2",component:"h1",gutterBottom:!0,children:"WebStremio"}),Object(g.jsx)(E.a,{basename:"/juan_carlos_web",children:Object(g.jsxs)(T.c,{children:[Object(g.jsx)(T.a,{exact:!0,path:"/",children:Object(g.jsx)(S,{})}),Object(g.jsx)(T.a,{path:"/watch/:id",children:Object(g.jsx)(I,{})})]})})]}),Object(g.jsx)("footer",{className:t.footer,children:Object(g.jsx)(h.a,{maxWidth:"sm",children:Object(g.jsx)(d.a,{variant:"body1",children:"We love Stremio"})})})]})})}}]),n}(a.Component),H=Object(L.a)((function(t){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:t.spacing(8),marginBottom:t.spacing(2)},footer:{padding:t.spacing(3,2),marginTop:"auto",backgroundColor:"light"===t.palette.type?t.palette.grey[200]:t.palette.grey[800]}}}))(F),B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),o(t),r(t),i(t)}))};i.a.render(Object(g.jsx)(H,{}),document.getElementById("root")),B()}},[[79,1,2]]]);
//# sourceMappingURL=main.d7536c63.chunk.js.map