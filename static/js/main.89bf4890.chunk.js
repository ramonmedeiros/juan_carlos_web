(this.webpackJsonpjuan_carlos_web=this.webpackJsonpjuan_carlos_web||[]).push([[0],{149:function(t,e){},151:function(t,e){},160:function(t,e){},165:function(t,e){},168:function(t,e){},169:function(t,e){},171:function(t,e){},172:function(t,e){},174:function(t,e){},176:function(t,e){},194:function(t,e){},200:function(t,e){},202:function(t,e){},203:function(t,e){},204:function(t,e){},207:function(t,e){},209:function(t,e){},210:function(t,e){},213:function(t,e){},214:function(t,e){},217:function(t,e){},220:function(t,e){},221:function(t,e){},247:function(t,e){},255:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o=n(13),s=n.n(o),c=n(20),r=n(43),u=n(28),l=n(26),h=n(63),f=n(62),m=n(118),d=n(119),b=n.n(d),j=n(298),p=n(292),O=n(296),v=n(297),g=n(14),y=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).props=t,i.imdbId=t.imdbId,i.state={streams:[]},i.startStream=i.startStream.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.listStreams()}},{key:"buildQuery",value:function(){var t={params:[null,{query:{imdb_id:this.imdbId,type:"movie",video_id:this.imdbId}}],method:"stream.find",id:1,jsonrpc:"2.0"};return btoa(JSON.stringify(t))}},{key:"listStreams",value:function(){var t=this;fetch("".concat("http://juan.best4stremio.space/stremioget/stremio/v1/q.json?b=").concat(this.buildQuery()),{method:"GET"}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){t.generateList(e.result)})).catch((function(t){console.error("Error:",t)}))}},{key:"startStream",value:function(t){var e=t.target.parentElement.attributes.infohash.value;(new b.a).add(e,(function(t){console.log(t.files),t.files.find((function(t){return t.name.endsWith(".mp4")})).appendTo("body")}))}},{key:"generateList",value:function(t){var e,n=[],a=Object(m.a)(t);try{for(a.s();!(e=a.n()).done;){var o=e.value,s=o.filename;void 0===s&&(s=document.getElementById("imdb_search").value),n.push(Object(g.jsxs)(i.Fragment,{children:[Object(g.jsx)(p.a,{button:!0,children:Object(g.jsx)(O.a,{primary:s,infohash:o.infoHash,onClick:this.startStream})}),Object(g.jsx)(v.a,{})]},o.infoHash))}}catch(r){a.e(r)}finally{a.f()}this.setState(Object(c.a)(Object(c.a)({},this.state),{},{streams:n}))}},{key:"render",value:function(){return Object(g.jsx)(i.Fragment,{children:Object(g.jsx)(j.a,{component:"nav","aria-label":"mailbox folders",children:this.state.streams})})}}]),n}(i.Component),x=n(4),S=n(299),T=n(304),k=n(305),C=n(303),I=n(65),L=n(300),w=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).props=t,i.state={open:!1,options:[],streamList:[]},i.searchTitle=i.searchTitle.bind(Object(l.a)(i)),i.listStreams=i.listStreams.bind(Object(l.a)(i)),i.data=[],i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"fetchList",value:function(){var t=this;fetch("".concat(window.location.href,"/movies.json"),{method:"GET"}).then((function(t){return t.json()})).then((function(e){t.data=e})).catch((function(t){console.error("Error:",t)}))}},{key:"searchJson",value:function(t){for(var e=[],n=0;n<this.data.length;n++)this.data[n].originalTitle.toLowerCase().includes(t.toLowerCase())&&e.push(this.data[n]);return e}},{key:"searchTitle",value:function(t){var e=this,n=t.target.value;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{options:e.searchJson(n)}))}),300)}},{key:"listStreams",value:function(){var t=this.searchJson(document.getElementById("imdb_search").value)[0].tconst;this.setState(Object(c.a)(Object(c.a)({},this.state),{},{streamList:Object(g.jsx)(y,{imdbId:t},t)}))}},{key:"render",value:function(){var t=this,e=this.props.classes;return Object(g.jsxs)("div",{className:e.root,children:[Object(g.jsx)(S.a,{}),Object(g.jsxs)(L.a,{component:"main",className:e.main,maxWidth:"sm",children:[Object(g.jsx)(I.a,{variant:"h2",component:"h1",gutterBottom:!0,children:"WebStremio"}),Object(g.jsx)(k.a,{id:"imdb_search",style:{width:500},open:this.state.open,onOpen:function(){t.setState(Object(c.a)(Object(c.a)({},t.state),{},{open:!0}))},onClose:function(){t.setState(Object(c.a)(Object(c.a)({},t.state),{},{open:!1}))},getOptionSelected:function(t,e){return t.originalTitle===e.originalTitle},getOptionLabel:function(t){return t.originalTitle},options:this.state.options,renderTags:this.listStreams,renderInput:function(e){return Object(g.jsx)(T.a,Object(c.a)(Object(c.a)({},e),{},{label:"Type the movie name",variant:"outlined",onChange:function(e){t.searchTitle(e)},InputProps:Object(c.a)({},e.InputProps)}))}}),Object(g.jsx)(C.a,{variant:"contained",onClick:this.listStreams,children:"Search Available streams"}),this.state.streamList]}),Object(g.jsx)("footer",{className:e.footer,children:Object(g.jsx)(L.a,{maxWidth:"sm",children:Object(g.jsx)(I.a,{variant:"body1",children:"We love Stremio"})})})]})}}]),n}(i.Component),E=Object(x.a)((function(t){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:t.spacing(8),marginBottom:t.spacing(2)},footer:{padding:t.spacing(3,2),marginTop:"auto",backgroundColor:"light"===t.palette.type?t.palette.grey[200]:t.palette.grey[800]}}}))(w),_=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,307)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),i(t),a(t),o(t),s(t)}))};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(E,{})}),document.getElementById("root")),_()}},[[255,1,2]]]);
//# sourceMappingURL=main.89bf4890.chunk.js.map