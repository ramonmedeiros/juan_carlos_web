(this.webpackJsonpjuan_carlos_web=this.webpackJsonpjuan_carlos_web||[]).push([[0],{79:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(11),i=n.n(o),s=n(22),c=n(17),l=n(29),u=n(27),h=n(41),d=n(127),j=n(15),b=n(19),m=n(52),p=n(122),f=n(116),O=n(120),g=n(121),v=n(7),x=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).props=t,a.imdbId=t.imdbId,a.state={torrentInfoHash:"",torrentMagnetURI:"",torrentName:"",torrentProgress:"",torrentFiles:[],mp4file:{},streams:[]},a.watch=a.watch.bind(Object(b.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.listStreams()}},{key:"buildQuery",value:function(){var t={params:[null,{query:{imdb_id:this.imdbId,type:"movie",video_id:this.imdbId}}],method:"stream.find",id:1,jsonrpc:"2.0"};return btoa(JSON.stringify(t))}},{key:"listStreams",value:function(){var t=this;fetch("".concat("https://juan.best4stremio.space/stremioget/stremio/v1/q.json?b=").concat(this.buildQuery()),{method:"GET"}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).then((function(e){t.generateList(e.result)})).catch((function(t){console.error("Error:",t)}))}},{key:"generateList",value:function(t){function e(t){return Object(v.jsx)(f.a,Object(j.a)({button:!0,component:"a"},t))}var n,r=[],o=Object(m.a)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,s=i.filename;void 0===s&&(s=document.getElementById("imdb_search").value);var c="".concat(window.location.href).concat(i.infoHash);r.push(Object(v.jsxs)(a.Fragment,{children:[Object(v.jsx)(e,{button:!0,href:c,children:Object(v.jsx)(O.a,{primary:s,infohash:i.infoHash})}),Object(v.jsx)(g.a,{})]},i.infoHash))}}catch(l){o.e(l)}finally{o.f()}this.setState(Object(j.a)(Object(j.a)({},this.state),{},{streams:r}))}},{key:"watch",value:function(t){window.location.href=t}},{key:"render",value:function(){return Object(v.jsx)(a.Fragment,{children:Object(v.jsx)(p.a,{component:"nav","aria-label":"mailbox folders",children:this.state.streams})})}}]),n}(a.Component),y=n(128),w=n(129),k=n(125),F=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).props=t,a.state={open:!1,options:[],streamList:[]},a.searchTitle=a.searchTitle.bind(Object(b.a)(a)),a.listStreams=a.listStreams.bind(Object(b.a)(a)),a.data=[],a.url=window.location.origin+window.location.pathname,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"fetchList",value:function(){var t=this;fetch("".concat(this.url,"/movies.json"),{method:"GET"}).then((function(t){return t.json()})).then((function(e){t.data=e})).catch((function(t){console.error("Error:",t)}))}},{key:"searchJson",value:function(t){for(var e=[],n=0;n<this.data.length;n++)this.data[n].originalTitle.toLowerCase().includes(t.toLowerCase())&&e.push(this.data[n]);return e}},{key:"searchTitle",value:function(t){var e=this,n=t.target.value;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.setState(Object(j.a)(Object(j.a)({},e.state),{},{options:e.searchJson(n)}))}),300)}},{key:"listStreams",value:function(){var t=this.searchJson(document.getElementById("imdb_search").value)[0].tconst;this.setState(Object(j.a)(Object(j.a)({},this.state),{},{streamList:Object(v.jsx)(x,{imdbId:t},t)}))}},{key:"render",value:function(){var t=this;return Object(v.jsxs)(a.Fragment,{children:[Object(v.jsx)(w.a,{id:"imdb_search",style:{width:500},open:this.state.open,onOpen:function(){t.setState(Object(j.a)(Object(j.a)({},t.state),{},{open:!0}))},onClose:function(){t.setState(Object(j.a)(Object(j.a)({},t.state),{},{open:!1}))},getOptionSelected:function(t,e){return t.originalTitle===e.originalTitle},getOptionLabel:function(t){return t.originalTitle},options:this.state.options,renderTags:this.listStreams,renderInput:function(e){return Object(v.jsx)(y.a,Object(j.a)(Object(j.a)({},e),{},{label:"Type the movie name",variant:"outlined",onChange:function(e){t.searchTitle(e)},InputProps:Object(j.a)({},e.InputProps)}))}}),Object(v.jsx)(k.a,{variant:"contained",onClick:this.listStreams,children:"Search Available streams"}),this.state.streamList]})}}]),n}(a.Component),A=n(13),S=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).infoHash=t.match.params.id,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.startStream()}},{key:"startStream",value:function(){(new window.WebTorrent).add(this.generateMagnetLink(this.infoHash),(function(t){console.log("AAAAAAAAAA"),console.log(t.files),t.files.find((function(t){return t.name.endsWith(".mp4")})).appendTo("player"),t.on("download",(function(e){console.log("just downloaded: "+e),console.log("total downloaded: "+t.downloaded),console.log("download speed: "+t.downloadSpeed),console.log("progress: "+t.progress)}))}))}},{key:"generateMagnetLink",value:function(t){return"magnet:?xt=urn:btih:".concat(t,"&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F")}},{key:"render",value:function(){return Object(v.jsx)(r.a.Fragment,{children:Object(v.jsx)("div",{id:"player"})})}}]),n}(a.Component),T=Object(A.f)(S),I=n(4),L=n(126),C=n(45),_=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props.classes;return Object(v.jsx)(r.a.Fragment,{children:Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)(L.a,{}),Object(v.jsxs)(d.a,{component:"main",className:t.main,maxWidth:"sm",children:[Object(v.jsx)(h.a,{variant:"h2",component:"h1",gutterBottom:!0,children:"WebStremio"}),Object(v.jsx)(C.a,{children:Object(v.jsxs)(A.c,{children:[Object(v.jsx)(A.a,{exact:!0,path:"/",children:Object(v.jsx)(F,{})}),Object(v.jsx)(A.a,{path:"/:id",children:Object(v.jsx)(T,{})})]})})]}),Object(v.jsx)("footer",{className:t.footer,children:Object(v.jsx)(d.a,{maxWidth:"sm",children:Object(v.jsx)(h.a,{variant:"body1",children:"We love Stremio"})})})]})})}}]),n}(a.Component),E=Object(I.a)((function(t){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:t.spacing(8),marginBottom:t.spacing(2)},footer:{padding:t.spacing(3,2),marginTop:"auto",backgroundColor:"light"===t.palette.type?t.palette.grey[200]:t.palette.grey[800]}}}))(_),H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),o(t),i(t)}))};i.a.render(Object(v.jsx)(E,{}),document.getElementById("root")),H()}},[[79,1,2]]]);
//# sourceMappingURL=main.3ac52628.chunk.js.map